INIT LDR R0,GPIO2
     MOV SP,#0x10000     ; INICIJALIZACIJA STACK-A

SMJER MOV R1,#0b11100000 ; POCENTO STANJE ZA PA_DDR, 1 SU IZLAZI A 0 SU ULAZI
      STR R1,[R0,#8]     ; ODREDILI SMO MU MSJEROVE I SAD AMOZEMO KRNUT CITAT PODATKE

PETLJA  LDR R1,[R0,#0]           ; PODATKA IZ PA_DR CITAM U R1 JER SMA VEC POISTAVIO USMJERENJE REGISTARA PA MOGU KORISTIT R1 ZA DRUGE SVRHE
        TST R1,#0b00000001       ; TESTIRAM ZA TIPKALO DALI JE PRITISNUTO
SET     ORRNE R1,R1,#0b00100000  ; NOVU IZRACUNATU VRIJEDNOST ZA PA_DR U R1 JE POTREBNO I SPREMITI NA ADRESU KOJA ODGOVARA REGISTRU PA_DR
        STRNE R1,[R0,#0]
        BLNE WAIT_SEC          ; AKO JE PRITISUNUTO UPALI MI LEDICU I CEKAJ JEDNU SKENDU

RESET   BIC R1,R1,#0b00100000    ; A INACE OPCENITO SMAO UGASI
        STR R1,[R0,#0]

        B PETLJA

GPIO2 DW 0xFFFF0B00



WAIT_SEC STMFD SP!,{R0}       ; SPREMAM VRIJEDNOST U KONTESKT ; n + 1
           LDR R0, KONST        ; 3

PETLJA2     SUBS R0,R0,#1        ; TRAJE 1 PERIOD ALI SE IZVRASVA KOSNT PUTA, PA TRAJE KONST PERIODA
           BNE PETLJA2           ; (KONST - 1) JE UVJET ISTITINIT * 3, 1 NIJE ISITINT PUTA 1, AKO NEMA SKOKA B TRAJE SAMO 1

KRAJ       LDMFD SP!,{R0}       ; n + 2
           MOV PC,LR            ; 3, INACE BI TRAJALO SAMO 1 KORAK, ALI OVO DODE ISOT KO SKOK

KONST DW 100              ; FREKVNECIJA U OVOM SIMULATORU JE PUNO NIOZA OD PRAVE FREKVENCIJE CIPA, PA JE ZAOT MALI BROJ, INACE BI TREBAO BITI OKO 2 500 000 ZA FREKVENCIJU OD 10 MHZ
